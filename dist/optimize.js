const fs=require("fs"),path=require("path");var UglifyJS=require("uglify-js"),jsonminify=require("jsonminify");console.log("Clearing old files...");try{fs.rmSync("./dist",{recursive:!0})}catch(i){}function copyFolderSync(o,e){fs.mkdirSync(e),fs.readdirSync(o).forEach(i=>{var n;fs.lstatSync(path.join(o,i)).isFile()?i.endsWith(".js")&&!i.endsWith(".min.js")?(console.log("Optimizing "+i),n=fs.readFileSync(path.join(o,i),"utf8"),n=UglifyJS.minify(n),fs.writeFileSync(path.join(e,i),n.code)):i.endsWith(".json")?(console.log("Optimizing "+i),n=fs.readFileSync(path.join(o,i),"utf8"),n=jsonminify(n),fs.writeFileSync(path.join(e,i),n)):(console.log("Copying "+i),fs.copyFileSync(path.join(o,i),path.join(e,i))):"dist"!==i&&".git"!==i&&copyFolderSync(path.join(o,i),path.join(e,i))})}console.log("Optimizing..."),copyFolderSync("./","./dist"),console.log("Done!");