var LZString=function(){function o(e,t){if(!i[e]){i[e]={};for(var o=0;o<e.length;o++)i[e][e.charAt(o)]=o}return i[e][t]}var m=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},s={compressToBase64:function(e){if(null==e)return"";var t=s._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:s._decompress(t.length,32,function(e){return o(n,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":s._compress(e,15,function(e){return m(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:s._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),o=new Uint8Array(2*t.length),n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);o[2*n]=i>>>8,o[2*n+1]=i%256}return o},decompressFromUint8Array:function(e){if(null==e)return s.decompress(e);for(var t=new Array(e.length/2),o=0,n=t.length;o<n;o++)t[o]=256*e[2*o]+e[2*o+1];var r=[];return t.forEach(function(e){r.push(m(e))}),s.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),s._decompress(t.length,32,function(e){return o(r,t.charAt(e))}))},compress:function(e){return s._compress(e,16,function(e){return m(e)})},_compress:function(e,t,o){if(null==e)return"";for(var n,r,i,s,a={},l={},c="",d=2,u=3,p=2,h=[],g=0,f=0,w=0;w<e.length;w+=1)if(i=e.charAt(w),Object.prototype.hasOwnProperty.call(a,i)||(a[i]=u++,l[i]=!0),s=c+i,Object.prototype.hasOwnProperty.call(a,s))c=s;else{if(Object.prototype.hasOwnProperty.call(l,c)){if(c.charCodeAt(0)<256){for(n=0;n<p;n++)g<<=1,f==t-1?(f=0,h.push(o(g)),g=0):f++;for(r=c.charCodeAt(0),n=0;n<8;n++)g=g<<1|1&r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r>>=1}else{for(r=1,n=0;n<p;n++)g=g<<1|r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r=0;for(r=c.charCodeAt(0),n=0;n<16;n++)g=g<<1|1&r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r>>=1}0==--d&&(d=Math.pow(2,p),p++),delete l[c]}else for(r=a[c],n=0;n<p;n++)g=g<<1|1&r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r>>=1;0==--d&&(d=Math.pow(2,p),p++),a[s]=u++,c=String(i)}if(""!==c){if(Object.prototype.hasOwnProperty.call(l,c)){if(c.charCodeAt(0)<256){for(n=0;n<p;n++)g<<=1,f==t-1?(f=0,h.push(o(g)),g=0):f++;for(r=c.charCodeAt(0),n=0;n<8;n++)g=g<<1|1&r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r>>=1}else{for(r=1,n=0;n<p;n++)g=g<<1|r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r=0;for(r=c.charCodeAt(0),n=0;n<16;n++)g=g<<1|1&r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r>>=1}0==--d&&(d=Math.pow(2,p),p++),delete l[c]}else for(r=a[c],n=0;n<p;n++)g=g<<1|1&r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(r=2,n=0;n<p;n++)g=g<<1|1&r,f==t-1?(f=0,h.push(o(g)),g=0):f++,r>>=1;for(;;){if(g<<=1,f==t-1){h.push(o(g));break}f++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:s._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,o){for(var n,r,i,s,a,l,c=[],d=4,u=4,p=3,h="",g=[],f={val:o(0),position:t,index:1},w=0;w<3;w+=1)c[w]=w;for(r=0,s=Math.pow(2,2),a=1;a!=s;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=o(f.index++)),r|=(0<i?1:0)*a,a<<=1;switch(r){case 0:for(r=0,s=Math.pow(2,8),a=1;a!=s;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=o(f.index++)),r|=(0<i?1:0)*a,a<<=1;l=m(r);break;case 1:for(r=0,s=Math.pow(2,16),a=1;a!=s;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=o(f.index++)),r|=(0<i?1:0)*a,a<<=1;l=m(r);break;case 2:return""}for(n=c[3]=l,g.push(l);;){if(f.index>e)return"";for(r=0,s=Math.pow(2,p),a=1;a!=s;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=o(f.index++)),r|=(0<i?1:0)*a,a<<=1;switch(l=r){case 0:for(r=0,s=Math.pow(2,8),a=1;a!=s;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=o(f.index++)),r|=(0<i?1:0)*a,a<<=1;c[u++]=m(r),l=u-1,d--;break;case 1:for(r=0,s=Math.pow(2,16),a=1;a!=s;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=t,f.val=o(f.index++)),r|=(0<i?1:0)*a,a<<=1;c[u++]=m(r),l=u-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,p),p++),c[l])h=c[l];else{if(l!==u)return null;h=n+n.charAt(0)}g.push(h),c[u++]=n+h.charAt(0),n=h,0==--d&&(d=Math.pow(2,p),p++)}}};return s}(),Base64=("function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,o,n,r,i,s,a="",l=0;for(e=Base64._utf8_encode(e);l<e.length;)n=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(t=e.charCodeAt(l++))>>4,i=(15&t)<<2|(o=e.charCodeAt(l++))>>6,s=63&o,isNaN(t)?i=s=64:isNaN(o)&&(s=64),a=a+this._keyStr.charAt(n)+this._keyStr.charAt(r)+this._keyStr.charAt(i)+this._keyStr.charAt(s);return a},decode:function(e){var t,o,n,r,i,s,a="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)n=this._keyStr.indexOf(e.charAt(l++)),t=(15&(r=this._keyStr.indexOf(e.charAt(l++))))<<4|(i=this._keyStr.indexOf(e.charAt(l++)))>>2,o=(3&i)<<6|(s=this._keyStr.indexOf(e.charAt(l++))),a+=String.fromCharCode(n<<2|r>>4),64!=i&&(a+=String.fromCharCode(t)),64!=s&&(a+=String.fromCharCode(o));return Base64._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):t=127<n&&n<2048?(t+=String.fromCharCode(n>>6|192))+String.fromCharCode(63&n|128):(t=(t+=String.fromCharCode(n>>12|224))+String.fromCharCode(n>>6&63|128))+String.fromCharCode(63&n|128)}return t},_utf8_decode:function(e){var t,o="",n=0;for(c1=c2=0;n<e.length;)(t=e.charCodeAt(n))<128?(o+=String.fromCharCode(t),n++):191<t&&t<224?(c2=e.charCodeAt(n+1),o+=String.fromCharCode((31&t)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),o+=String.fromCharCode((15&t)<<12|(63&c2)<<6|63&c3),n+=3);return o}}),downloadUrl=window.isElectron?"https://devnetic.appdevleague.org/app/assets/plugins/":"./assets/plugins/";const codeEditorHelper=require("./codeEditor.js");function openConnection(){return new Promise((t,e)=>{const o=indexedDB.open("tAppCache");o.onsuccess=e=>{e=e.target.result;t(e)},o.onupgradeneeded=e=>{let t=e.target.result;t.createObjectStore("cachedPages",{autoIncrement:!0})}})}function getFile(s){return new Promise((r,i)=>{openConnection().then(e=>{const t=e.transaction("cachedPages","readwrite"),o=t.objectStore("cachedPages");let n=o.get(window.location.origin+window.location.pathname+s);n.onsuccess=async function(e){if(!n.result)return i("File not found!");var t=await(t=new Response(n.result.data,n.result.response)).text();r(t)},n.onerror=function(e){console.log(e.target.errorCode)},t.oncomplete=function(){e.close()}})})}function deleteFile(r){openConnection().then(e=>{const t=e.transaction("cachedPages","readwrite"),o=t.objectStore("cachedPages");let n=o.openKeyCursor(window.location.origin+window.location.pathname+r);n.onsuccess=function(e){o.delete(e.target.result.primaryKey),console.log("Deleted file!")},n.onerror=function(e){console.log(e.target.errorCode)},t.oncomplete=function(){e.close()}})}function addPlugin(r,i){openConnection().then(e=>{const t=e.transaction("Plugincode","readwrite"),o=t.objectStore("Plugincode");let n=o.put({pluginId:r,code:i});n.onsuccess=function(e){},n.onerror=function(e){console.log(e.target.errorCode)},t.oncomplete=function(){e.close()}})}function sleep(t){return new Promise(e=>setTimeout(e,t))}function fetchWithProgress(c,d,u,p){return console.log("Starting to download file "+c),new Promise(async(e,t)=>{let o=await fetch(c);!1===o.ok&&t("Failed to fetch");const n=o.body.getReader();var r=+o.headers.get("Content-Length");let i=0,s=[];for(;;){var{done:a,value:l}=await n.read();if(a)break;s.push(l);a=(i+=l.length)/r/u+d/u;p(a)}e()})}module.exports={async load(e){if(window.pluginList&&("loading"===window.pluginList[e]||"loaded"===window.pluginList[e]))return"Error: plugin is currently loading/already loaded";window.pluginList||(window.pluginList={}),window.pluginList[e]="loading";var t=await getFile("assets/plugins/"+e+"/"+e+".min.js");if(!t)throw delete window.pluginList[e],"Error: plugin "+e+" not found locally!";var o=document.createElement("script");return o.type="text/javascript",o.innerHTML=t,o.id="plugin-"+e,$("body").append(o),window.pluginList[e]="loaded",!0},async getCode(e){var t=await getFile("assets/plugins/"+e+"/"+e+".min.js");if(t)return t;throw delete window.pluginList[e],"Error: plugin "+e+" not found locally!"},async getVersion(e){return getFile("assets/plugins/"+e+"/VERSION.txt")},async download(t,e,o,n){var r;try{if(!1===(r=await fetch(downloadUrl+t+"/files.map?version="+Math.random())).ok)throw"Failed to fetch";for(var i in r=await r.json()){var s=r[i];await fetchWithProgress(""+downloadUrl+t+"/"+s,i,r.length,e||function(){})}o(!0);var a=this.availablePlugins().find(e=>e.id==t).name;return n||codeEditorHelper.showAlertModal("Successfully downloaded plugin "+a,[{text:"Ok",onclick:function(){codeEditorHelper.removeAlertModal(this.parentElement.parentElement.getAttribute("data-editor-alert-modal-index"))}}],"codicon-pass",7),!0}catch(e){return codeEditorHelper.showAlertModal("We couldn't download the plugin! Check your internet connection and try again",[{text:"Ok",onclick:function(){codeEditorHelper.removeAlertModal(this.parentElement.parentElement.getAttribute("data-editor-alert-modal-index"))}}],"codicon-error"),o&&o("failed"),!1}},unload(e){var t=document.getElementById("plugin-"+e);if(!t)throw"Error: plugin "+e+" was never loaded";t.remove(),delete window.pluginList[e]},async remove(t){let e=await getFile("assets/plugins/"+t+"/files.map");(e=JSON.parse(e)).forEach(e=>{console.log("Deleting file: "+e),deleteFile(`assets/plugins/${t}/`+e)});var o=this.availablePlugins().find(e=>e.id==t).name;codeEditorHelper.showAlertModal("Successfully removed plugin "+o,[{text:"Ok",onclick:function(){codeEditorHelper.removeAlertModal(this.parentElement.parentElement.getAttribute("data-editor-alert-modal-index"))}}],"codicon-pass",4)},availablePlugins(){return[{name:"Resizable Editor",description:"This plugin allows you to resize the editor window, as well as re-arange the tabs.",image:"./assets/plugins/betterEditor/betterEditor.png",id:"betterEditor",onInstall:'plugins.load("betterEditor").then(() => updateEditorSettings({dividerPosition: null}))',latestVersion:"2.4.4"},{name:"Brython",description:"This plugin allows you to run python in the browser!",image:"./assets/plugins/brython/brython.svg",id:"brython",latestVersion:"3.0.1"},{name:"JS-CPP",description:"This plugin compiles C++ code to Javascript!",image:"./assets/plugins/jscpp/jscpp.svg",id:"jscpp",latestVersion:"0.0.1"},{name:"Typescript",description:"This plugin allows you to run typescript in the browser!",image:"./assets/plugins/typescript/typescript.svg",id:"typescript",latestVersion:"0.0.1"},{name:"Markdown",description:"This plugin allows you to render markdown code in the browser!",image:"./assets/plugins/showdown/markdown-logo.png",id:"showdown",latestVersion:"2.1.0"},{name:"ReactJS",description:"This plugin allows you to create and preview a ReactJS website!",image:"./assets/plugins/react/react.svg",id:"react",latestVersion:"3.1.1"},{name:"Perl",description:"This plugin allows you to run perl code directly in the browser!!",image:"./assets/plugins/webperl/webperl.png",id:"webperl",latestVersion:"1.0.0"},{name:"Hex Editor",description:"View and edit binary files in the code editor!",image:"./assets/plugins/hexy/logo.png",id:"hexy",latestVersion:"1.0.0"}]},async checkPluginStatus(e){try{return await getFile("assets/plugins/"+e+"/files.map"),!0}catch(e){return!1}},async getDownloadSize(e){if(!window.pluginSizes){let e=await fetch("./assets/plugins/sizes.json");e=await e.json(),window.pluginSizes=e}return window.pluginSizes[e]},async getOldPlugins(){let e=this.availablePlugins(),t=[],o=[];var n=this;let r=[];return e.forEach(e=>{r.push(async function(){await n.checkPluginStatus(e.id)&&t.push(e)}())}),await Promise.all(r),r=[],t.forEach(e=>{r.push(async function(){await n.getVersion(e.id)!==e.latestVersion&&o.push(e)}())}),await Promise.all(r),o},Base64:Base64},window.getFile=getFile,window.deleteFile=deleteFile;