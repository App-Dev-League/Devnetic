function dragMoveListener(e){var t=e.target.parentElement,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,e=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.classList.contains("window-maximized")||(t.style.webkitTransform=t.style.transform="translate("+n+"px, "+e+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",e))}function updateWindowStack(){window.windowManager.forEach((e,t)=>{document.getElementById(e).style.zIndex=t+300})}window.windowManager||(window.windowManager=[]),module.exports={newWindow:function(e,t,n,i){let a=document.createElement("div");return a.id="window-"+Math.random().toString().replace(".",""),a.innerHTML=`
        <div class="window-header"><span>${e}</span>
            <div class="buttons">
                <span onclick="require('./utils/window.js').toggleMaximized('${a.id}')" class="codicon codicon-chrome-restore"></span>
                <span onclick="require('./utils/window.js').killWindow('${a.id}')" class="codicon codicon-close"></span>
            </div>
        </div>
        <div class="window-content" style="height: 100%">${t}</div>
        `,a.classList.add("window-window"),a.style.height=i||"fit-content",a.style.width=n||"fit-content",document.getElementById("window-container").appendChild(a),window.windowManager.push(a.id),interact("#"+a.id).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move(e){var t,n,i=e.target;i.classList.contains("window-maximized")||(i.querySelector("iframe")&&(i.querySelector("iframe").style.pointerEvents="none"),t=parseFloat(i.getAttribute("data-x"))||0,n=parseFloat(i.getAttribute("data-y"))||0,i.style.width=e.rect.width+"px",i.style.height=e.rect.height+"px",t+=e.deltaRect.left,n+=e.deltaRect.top,i.style.transform="translate("+t+"px,"+n+"px)",i.setAttribute("data-x",t),i.setAttribute("data-y",n))}}}).on("resizeend",function(e){e.target.querySelector("iframe")&&(e.target.querySelector("iframe").style.pointerEvents="all")}),interact("#"+a.id+" .window-header").draggable({listeners:{move:dragMoveListener}}),a.addEventListener("mousedown",function(){var e=window.windowManager.findIndex(e=>e===a.id);window.windowManager.splice(e,1),window.windowManager.push(a.id),updateWindowStack()}),updateWindowStack(),a.id},killWindow:function(t){let e=document.getElementById(t);e.parentElement.removeChild(e);var n=window.windowManager.findIndex(e=>e===t);window.windowManager.splice(n,1),updateWindowStack()},toggleMaximized:function(e){let t=document.getElementById(e);t.classList.add("transitioning"),t.classList.toggle("window-maximized"),setTimeout(function(){t.classList.remove("transitioning")},500)},updateWindow:function(e,t,n){let i=document.getElementById(e);n&&(i.querySelector(".window-header span").innerHTML=n),t&&(i.querySelector(".window-content").innerHTML=t)}};